---
title: socket프로그래밍 정리(암기용)
categories: [04_IT_CS]
---


## 개요#


## 리스닝 소켓 생성과정 #
1. socket()
2. bind()
3. listen() 
4. accept()


## 클라이언트 소켓 생성과정 #

1. socket()
2. connect()
2. connect()







## 소켓 생성 socket() #

```bash 
int socket(int domain,int type, int protocol)

#성공 -> fd
#실패 -> -1

```



### socket 예제 ##

```bash
int tcp_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
int udp_socket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
```




### 프로토콜 체계(domain) ##
- AF_INET
- AF_PACKET


### 소켓 타입(type) ##
- SOCK_STREAM
- SOCK_DGRAM

### 프로토콜 (protocol) ##
- IPPROTO_TCP
- IPPROTO_UDP








## bind() 

```bash

int bind(int sockfd, struct sockaddr *myaddr, socklen_t addrlen);

# 성공 -> 0
# 실패 -> -1

```

> sockaddr_in 구조
```bash 
struct sockaddr_in
{
sa_famaily_t sin_family; #AF_INET이 국룰
uint16_t sin_port;       #16bit 포트번호(네트워크 바이트 순서)
struct in_addr sin_addr; #32비트 ip주소(네트워크 바이트 순서)
char sin_zero[8]         #0으로 채우기
}

```





## 참고 #


### gcc 컴파일 방법 

```bash
gcc c파일.c -o 실행파일
```



### 파일 열기/닫기/쓰기 ##


> 파일 열기
```bash 
int open(const char *path, int flag);

#반환값
#성공 시 fd 반환
#실패 시 -1 반환
```


> 파일 닫기
```bash 
int close(int fd);

#반환값
#성공 시 0 반환
#실패 시 -1 반환

```




> 파일 쓰기
```bash 
ssize_t write(int fd,const void *buf, size_t nbytes);

#반환값
#성공 시 **전달한 바이트 수**
#실패 시 -1 반환
```

> 파일 읽기

```bash 
ssize_t read(int fd, void *buf, size_t nbytes);

#반환값
#성공 시 **수신한 바이트 수**
#실패 시 -1 반환
```






